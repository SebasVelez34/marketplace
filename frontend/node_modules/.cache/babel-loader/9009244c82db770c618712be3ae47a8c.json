{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Development_Projects\\\\marketplace\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Development_Projects\\\\marketplace\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{CART_ADD_ITEM,CART_REMOVE_ITEM}from\"../constants/cartConstants\";import Cookie from'js-cookie';var axios=require(\"axios\");var addToCart=function addToCart(productId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,_yield$axios$post,data,_getState2,cartItems;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_getState=getState(),userInfo=_getState.userSignin.userInfo;_context.next=4;return axios.post(\"/api/v1/cart/\",{productId:productId,userInfo:userInfo});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;//const { data } = await axios.get(`/api/v1/products/byId/${productId}`);\ndispatch({type:CART_ADD_ITEM,payload:{product:data._id,name:data.name,category:data.category,image:data.image,price:data.price,description:data.description}});_getState2=getState(),cartItems=_getState2.cart.cartItems;Cookie.set(\"cartItems\",JSON.stringify(cartItems));_context.next=13;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};var removeFromCart=function removeFromCart(productId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState3,userInfo,_yield$axios$delete,data,_getState4,cartItems;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getState3=getState(),userInfo=_getState3.userSignin.userInfo;console.log(\"UserInfo : \",userInfo);_context2.next=4;return axios.delete(\"/api/v1/cart/\",{data:{productId:productId,userInfo:userInfo}});case 4:_yield$axios$delete=_context2.sent;data=_yield$axios$delete.data;dispatch({type:CART_REMOVE_ITEM,payload:productId});_getState4=getState(),cartItems=_getState4.cart.cartItems;Cookie.set(\"cartItems\",JSON.stringify(cartItems));case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export{addToCart,removeFromCart};","map":{"version":3,"sources":["D:/Development_Projects/marketplace/frontend/src/actions/cartActions.js"],"names":["CART_ADD_ITEM","CART_REMOVE_ITEM","Cookie","axios","require","addToCart","productId","dispatch","getState","userInfo","userSignin","post","data","type","payload","product","_id","name","category","image","price","description","cartItems","cart","set","JSON","stringify","removeFromCart","console","log","delete"],"mappings":"mVAAA,OAASA,aAAT,CAAwBC,gBAAxB,KAAgD,4BAAhD,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,GAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,OAAD,CAArB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,SAAD,iGAAe,iBAAOC,QAAP,CAAiBC,QAAjB,+MAEWA,QAAQ,EAFnB,CAEHC,QAFG,WAEjBC,UAFiB,CAEHD,QAFG,uBAGFN,CAAAA,KAAK,CAACQ,IAAN,iBAA2B,CAC9CL,SAAS,CAATA,SAD8C,CAE9CG,QAAQ,CAARA,QAF8C,CAA3B,CAHE,wCAGjBG,IAHiB,mBAGjBA,IAHiB,CAOzB;AACAL,QAAQ,CAAC,CAAEM,IAAI,CAAEb,aAAR,CAAuBc,OAAO,CAAC,CACpCC,OAAO,CAAMH,IAAI,CAACI,GADkB,CAEpCC,IAAI,CAASL,IAAI,CAACK,IAFkB,CAGpCC,QAAQ,CAAKN,IAAI,CAACM,QAHkB,CAIpCC,KAAK,CAAQP,IAAI,CAACO,KAJkB,CAKpCC,KAAK,CAAQR,IAAI,CAACQ,KALkB,CAMpCC,WAAW,CAAET,IAAI,CAACS,WANkB,CAA/B,CAAD,CAAR,CARyB,WAgBMb,QAAQ,EAhBd,CAgBTc,SAhBS,YAgBjBC,IAhBiB,CAgBTD,SAhBS,CAiBzBpB,MAAM,CAACsB,GAAP,CAAW,WAAX,CAAwBC,IAAI,CAACC,SAAL,CAAeJ,SAAf,CAAxB,EAjByB,sJAAf,oEAAlB,CAqBA,GAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACrB,SAAD,kGAAe,kBAAOC,QAAP,CAAiBC,QAAjB,uMACEA,QAAQ,EADV,CACZC,QADY,YAC1BC,UAD0B,CACZD,QADY,CAElCmB,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA0BpB,QAA1B,EAFkC,uBAGXN,CAAAA,KAAK,CAAC2B,MAAN,iBAA6B,CAChDlB,IAAI,CAAG,CACHN,SAAS,CAATA,SADG,CAEHG,QAAQ,CAARA,QAFG,CADyC,CAA7B,CAHW,2CAG1BG,IAH0B,qBAG1BA,IAH0B,CASlCL,QAAQ,CAAC,CAAEM,IAAI,CAAEZ,gBAAR,CAA0Ba,OAAO,CAAER,SAAnC,CAAD,CAAR,CATkC,WAUHE,QAAQ,EAVL,CAUlBc,SAVkB,YAU1BC,IAV0B,CAUlBD,SAVkB,CAWlCpB,MAAM,CAACsB,GAAP,CAAW,WAAX,CAAwBC,IAAI,CAACC,SAAL,CAAeJ,SAAf,CAAxB,EAXkC,wDAAf,sEAAvB,CAcA,OAASjB,SAAT,CAAoBsB,cAApB","sourcesContent":["import { CART_ADD_ITEM, CART_REMOVE_ITEM } from \"../constants/cartConstants\";\r\nimport Cookie from 'js-cookie';\r\nconst axios = require(\"axios\")\r\n\r\nconst addToCart = (productId) => async (dispatch, getState) =>{\r\n    try {\r\n        const { userSignin: { userInfo} } = getState();\r\n        const { data } = await axios.post(`/api/v1/cart/`,{\r\n            productId,\r\n            userInfo\r\n        });\r\n        //const { data } = await axios.get(`/api/v1/products/byId/${productId}`);\r\n        dispatch({ type: CART_ADD_ITEM, payload:{\r\n            product    : data._id,\r\n            name       : data.name,\r\n            category   : data.category,\r\n            image      : data.image,\r\n            price      : data.price,\r\n            description: data.description\r\n        }});\r\n        const { cart: { cartItems} } = getState();\r\n        Cookie.set(\"cartItems\", JSON.stringify(cartItems));\r\n    } catch (error) {}\r\n}\r\n\r\nconst removeFromCart = (productId) => async (dispatch, getState) =>{\r\n    const { userSignin: { userInfo} } = getState();\r\n    console.log(\"UserInfo : \",userInfo);\r\n    const { data } = await axios.delete(`/api/v1/cart/`,{\r\n        data : {\r\n            productId,\r\n            userInfo\r\n        }\r\n    });\r\n    dispatch({ type: CART_REMOVE_ITEM, payload: productId });\r\n    const { cart: { cartItems} } = getState();\r\n    Cookie.set(\"cartItems\", JSON.stringify(cartItems));\r\n}\r\n\r\nexport { addToCart, removeFromCart }"]},"metadata":{},"sourceType":"module"}